% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/anthropic_messages.R
\name{ant_complete_df}
\alias{ant_complete_df}
\title{Process a data frame through Anthropic's Messages API}
\usage{
ant_complete_df(
  df,
  text_var,
  id_var,
  model = "claude-haiku-4-5",
  output_dir = "auto",
  system_prompt = NULL,
  schema = NULL,
  chunk_size = 5000L,
  concurrent_requests = 5L,
  max_retries = 5L,
  timeout = 30,
  temperature = 0,
  max_tokens = 1024L,
  key_name = "ANTHROPIC_API_KEY",
  endpoint_url = .ANT_MESSAGES_ENDPOINT
)
}
\arguments{
\item{df}{Data frame containing text to process}

\item{text_var}{Column name (unquoted) containing text inputs}

\item{id_var}{Column name (unquoted) for unique row identifiers}

\item{model}{Anthropic model to use}

\item{output_dir}{Directory for parquet chunks}

\item{system_prompt}{Optional system prompt}

\item{schema}{Optional JSON schema for structured output}

\item{chunk_size}{Number of texts per chunk}

\item{concurrent_requests}{Number of concurrent requests}

\item{max_retries}{Maximum retry attempts}

\item{timeout}{Request timeout in seconds}

\item{temperature}{Sampling temperature}

\item{max_tokens}{Maximum tokens per response}

\item{key_name}{Environment variable name for API key}

\item{endpoint_url}{Anthropic API endpoint URL}
}
\value{
A tibble with results
}
\description{
Takes a data frame with text inputs and processes each row through
Anthropic's Messages API using chunked processing. Results are written
progressively to parquet files and returned as a tibble. Supports
structured outputs via the schema = argument.
}
\details{
writes results to disk to minimise memory usage and possibility of data loss.

Results are written as parquet files in the specified output directory,
along with a metadata.json file containing processing parameters.

When using the \verb{output_dir =} argument, be careful that you select
a new directory if you do not wish to overwrite existing chunks.
If there is already a \code{chunks_001.parquet} file in the directory,
it will be overwritten.
}
