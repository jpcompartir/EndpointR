% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/openai_embed.R
\name{oai_build_embedding_request_batch}
\alias{oai_build_embedding_request_batch}
\title{Build OpenAI batch embedding API request}
\usage{
oai_build_embedding_request_batch(
  inputs,
  model = "text-embedding-3-small",
  dimensions = NULL,
  max_retries = 5,
  timeout = 20,
  endpoint_url = "https://api.openai.com/v1/embeddings",
  key_name = "OPENAI_API_KEY"
)
}
\arguments{
\item{inputs}{List or vector of character strings to embed}

\item{model}{OpenAI embedding model to use (default: "text-embedding-3-small")}

\item{dimensions}{Number of embedding dimensions (NULL uses model default)}

\item{max_retries}{Maximum retry attempts for failed requests (default: 5)}

\item{timeout}{Request timeout in seconds (default: 20)}

\item{endpoint_url}{OpenAI API endpoint URL (default: OpenAI's embedding endpoint)}

\item{key_name}{Name of environment variable containing the API key (default: "OPENAI_API_KEY")}
}
\value{
An httr2 request object configured for the OpenAI embedding API.
The request object includes a \code{total_chars} attribute containing the
total character count of all input texts.
}
\description{
Creates an httr2 request object configured for OpenAI's embedding API
to process multiple texts in a single batch request. This is more
efficient than making individual requests for each text.
}
\details{
This function builds the HTTP request but does not execute it. The request
can then be performed using \code{httr2::req_perform()}. OpenAI's embedding
API can handle multiple texts in a single request, which is more efficient
for processing batches of documents.

Note that the combined token count of all inputs cannot exceed the model's
maximum context length. Individual inputs also cannot be empty strings.
}
\examples{
\dontrun{
  # Build a batch request
  texts <- c("First text", "Second text", "Third text")
  req <- oai_build_embedding_request_batch(texts)
  
  # Build batch request with custom settings
  req <- oai_build_embedding_request_batch(
    inputs = texts,
    model = "text-embedding-3-large",
    dimensions = 1024,
    timeout = 30
  )
  
  # Perform the request
  response <- httr2::req_perform(req)
}
}
