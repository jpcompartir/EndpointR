% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hf_classify.R
\name{hf_classify_df}
\alias{hf_classify_df}
\title{Classify a data frame of texts using Hugging Face Inference Endpoints}
\usage{
hf_classify_df(
  df,
  text_var,
  id_var,
  endpoint_url,
  key_name,
  ...,
  tidy_func = tidy_batch_classification_response,
  parameters = list(return_all_scores = TRUE),
  batch_size = 4,
  concurrent_requests = 1,
  max_retries = 5,
  timeout = 30,
  progress = TRUE
)
}
\arguments{
\item{df}{Data frame containing texts to classify}

\item{text_var}{Column name containing texts to classify (unquoted)}

\item{id_var}{Column name to use as identifier for joining (unquoted)}

\item{endpoint_url}{URL of the Hugging Face Inference API endpoint}

\item{key_name}{Name of environment variable containing the API key}

\item{...}{Additional arguments passed to request functions}

\item{tidy_func}{Function to process API responses, defaults to
\code{tidy_batch_classification_response}}

\item{parameters}{List of parameters for the API endpoint, defaults to
\code{list(return_all_scores = TRUE)}}

\item{batch_size}{Integer; number of texts per batch (default: 4)}

\item{concurrent_requests}{Integer; number of concurrent requests (default: 1)}

\item{max_retries}{Integer; maximum retry attempts (default: 5)}

\item{timeout}{Numeric; request timeout in seconds (default: 30)}

\item{progress}{Logical; whether to show progress bar (default: TRUE)}
}
\value{
Original data frame with additional columns for classification scores,
or classification results table if row counts don't match
}
\description{
Classifies texts in a data frame column using a Hugging Face classification
endpoint and joins the results back to the original data frame.
}
\details{
This function extracts texts from a specified column, classifies them using
\code{hf_classify_batch()}, and joins the classification results back to the
original data frame using a specified ID column.

The function preserves the original data frame structure and adds new
columns for classification scores. If the number of rows doesn't match
after processing (due to errors), it returns the classification results
separately with a warning.

The function does not currently handle \code{list(return_all_scores = FALSE)}.
}
\examples{
\dontrun{
  df <- data.frame(
    id = 1:3,
    review = c("Excellent service", "Poor quality", "Average experience")
  )

  classified_df <- hf_classify_df(
    df = df,
    text_var = review,
    id_var = id,
    endpoint_url = "redacted",
    key_name = "API_KEY"
  )
}
}
