<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Managing API Keys Securely • EndpointR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Managing API Keys Securely">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EndpointR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/api_keys.html">API Key Management</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Hugging Face</h6></li>
    <li><a class="dropdown-item" href="../articles/hugging_face_inference.html">Hugging Face Inference Endpoints</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>LLM Providers (OpenAI, Anthropic)</h6></li>
    <li><a class="dropdown-item" href="../articles/llm_providers.html">Working with Major LLM Providers</a></li>
    <li><a class="dropdown-item" href="../articles/structured_outputs_json_schema.html">Structured Outputs with JSON Schema</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/embeddings_providers.html">Embeddings</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Topics</h6></li>
    <li><a class="dropdown-item" href="../articles/improving_performance.html">Improving Performance</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="dropdown-item" href="../news/index.html">Version 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Managing API Keys Securely</h1>
            
      

      <div class="d-none name"><code>api_keys.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jpcompartir.github.io/EndpointR/">EndpointR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="quick-start">Quick start<a class="anchor" aria-label="anchor" href="#quick-start"></a>
</h2>
<p>EndpointR has two main functions for managing API keys, they are
<code><a href="../reference/get_api_key.html">get_api_key()</a></code> and <code><a href="../reference/set_api_key.html">set_api_key()</a></code>, they both
take ‘key_name’ as an input. For security, <code><a href="../reference/set_api_key.html">set_api_key()</a></code>
uses askpass to accept API keys rather than code - this means it will
not show up in .Rhistory, and is less likely to be leaked.</p>
<p>First you set your API key:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/set_api_key.html">set_api_key</a></span><span class="op">(</span><span class="st">"TOY_API_KEY"</span><span class="op">)</span></span></code></pre></div>
<p>Then restart your R session.</p>
<p>Now get your API key</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">api_key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_api_key.html">get_api_key</a></span><span class="op">(</span><span class="st">"TOY_API_KEY"</span><span class="op">)</span></span></code></pre></div>
<p>For security reasons, do not print <code>api_key</code> to your
console, pass it to the function that requires it.</p>
</div>
<div class="section level2">
<h2 id="what-is-an-api">What is an API?<a class="anchor" aria-label="anchor" href="#what-is-an-api"></a>
</h2>
<p><a href="https://en.wikipedia.org/wiki/API" target="_blank" class="external-link">API</a>
stands for ‘Application Programming Interface’, it is a mechanism for
two pieces of software to interact and exchange data. APIs work by
requests - a user sends a request to a service, and the service sends a
response, fulfilling the user’s request, or providing an error
message.</p>
<p>A specific location within an API that allows the user to access some
service, or function, is called an endpoint.</p>
</div>
<div class="section level2">
<h2 id="what-is-an-api-key">What is an API Key?<a class="anchor" aria-label="anchor" href="#what-is-an-api-key"></a>
</h2>
<p>Because many APIs provide access to sensitive information, or require
a credit card to send requests, it’s important API providers are able to
identify who is sending the request, to determine whether it’s safe to
respond, and who to charge for the response. An API key is <em>the</em>
mechanism for identifying who is sending a request.</p>
<p>See also: <a href="https://aws.amazon.com/what-is/api-key/" target="_blank" class="external-link">API keys</a></p>
</div>
<div class="section level2">
<h2 id="api-key-security">API Key Security<a class="anchor" aria-label="anchor" href="#api-key-security"></a>
</h2>
<blockquote>
<p><strong>WARNING:</strong> EndpointR will try to help you manage API
keys safely, but there is a baseline level of responsibility each person
using a managed service needs to take on, and a set of best practices
which need to be followed.</p>
</blockquote>
<p>It is <strong>paramount</strong> that we handle our API keys
securely. You need to avoid the following things:</p>
<ul>
<li>Saving unencrypted API keys in notes, emails, Google Docs etc.</li>
<li>Uploading API keys to web services (GitHub, etc.)</li>
<li>Sharing API keys with other people</li>
<li>Including unencrypted API keys in your code (scripts,
R/Quarto/markdown files, .ipynb etc.)</li>
<li>Unencypted API keys appearing in your .Rhistory file
(<strong>especially</strong> if this file is being uploaded
anywhere)</li>
</ul>
<p>If you suspect you may have done one - or any number - of these
things, go directly to where you got your key, invalidate the old one
and generate a new one. If the key was given to you, go directly to the
person and tell them that your key has been compromised and they will
invalidate it for you, and provide you a new one.</p>
<p>Instead of the above, you should:</p>
<ul>
<li>Encrypt your API keys</li>
<li>Store them as environment variables if using in
R/Rstudio/VScode</li>
</ul>
<p>OR</p>
<ul>
<li>Store them as managed secrets by providers like GitHub for use
outside of R/Rstudio/VScode</li>
</ul>
</div>
<div class="section level2">
<h2 id="managing-multiple-keys">Managing Multiple Keys<a class="anchor" aria-label="anchor" href="#managing-multiple-keys"></a>
</h2>
<p>For each endpoint that EndpointR provides access to, you will need
the correct environment variable stored in your <a href="https://docs.posit.co/ide/user/ide/guide/environments/r/managing-r.html#renviron" class="external-link">.Renviron
file</a></p>
<table class="table">
<caption>API Key Lookup Table</caption>
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Endpoint</th>
<th>Description</th>
<th>Environment Variable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>OpenAI</td>
<td>To access OpenAI models for embedding, classification, structured
outputs</td>
<td>OPENAI_API_KEY</td>
</tr>
<tr class="even">
<td>Anthropic</td>
<td>To access Anthropic models for classification and structured
outputs</td>
<td>ANTHROPIC_API_KEY</td>
</tr>
<tr class="odd">
<td>bge-base-en</td>
<td></td>
<td>HF_BGE_BASE_KEY</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/jpcompartir" class="external-link">Jack Penzer</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
